---
title: "`#` 与 `$` 的区别"
sequence: "101"
---

在 MyBatis 中，`#{}` 和 `${}` 有不同的用途和区别。

`${}`：这是一个基本的**字符串替换操作**。
比如你在 SQL 语句中写 `${name}`，MyBatis 就会直接把这个 `${name}` 替换成参数中对应的值。
由于它是直接替换，所以它没有任何防止 SQL 注入的能力。
因此，你应该只在信任的范围内使用 `${}`，不应该在任何安全关键的场景中使用它。

`#{}`：这是**参数的安全引用**。
它在 MyBatis 的 SQL 语句中提供了预编译参数的功能，它可以有效的防止 SQL 注入。
当你需要使用变量时，使用 `#{}` 将更加安全。
在查询中，MyBatis 会将参数以预编译的形式传入，如果参数是一个对象，
那么 MyBatis 会自动为这个对象生成一个对应的占位符，如果参数是一个数组或列表，MyBatis 会自动为数组或列表生成多个占位符。

总结来说，`#{}` 更安全，因为它可以防止 SQL 注入，而 `${}` 则可能存在 SQL 注入的风险。因此，在编写 SQL 查询时，应优先使用 `#{}`。
