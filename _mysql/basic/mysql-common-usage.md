---
title: "MySQL 常用场景"
sequence: "115"
---

## MySQL 的批量插入

这个在之前的一篇文章《MyBatis 批量插入使用 foreach 循环插入的优化，使用分片多线程》中已经详细的介绍过了。
通过 foreach 循环插入，大量数据时配合分片批量插入。
我们再延伸一个，在插入时，已存在的数据进行更新不再重复插入，使用 MySQL 的 ON DUPLICATE KEY UPDATE。

## MySQL 中删除重复数据只保留一条

我们以 user 表为例，删除 user_name 同名的数据，只保留一条。简单的处理方式就是通过 HAVING 查询重复的，然后保留 id 最大的那一条数据。

## mysql 多表关联更新

对于多表关联更新的操作需要慎重，建议在更新前，先使用 SELECT 语句查询验证更新的数据与自己期望的是否一致。
多表联合更新有很多种方式，可以使用 INNER JOIN、LEFT JOIN，也可以使用子查询，下面就编写一个示例。

