---
title: "索引"
sequence: "101"
---

什么情况下，不会用到索引：

- 使用索引优化排序

## 数据表索引的目的

- 索引就是为表(Table)建立的”目录”
- 索引的目的就是防止全表扫描(Full Scan)
- 索引的存储形式是由**存储引擎**决定

## 数据表索引分类

### 存储结构

- 从存储结构上来划分：
    - BTree索引（B-Tree或B+Tree索引）
    - Hash索 引
    - full-index全文索引
    - R-Tree索引

### 应用层次

- 从应用层次来分：
    - 普通索引
    - 唯一索引
    - 复合索引

在数据库中，常见的索引类型包括普通索引、唯一索引和联合索引。

- **普通索引（Non-Unique Index）**：普通索引也称为非唯一索引，它允许表中的列包含重复的值。普通索引可以加快查询的速度，但允许重复值的存在。
- **唯一索引（Unique Index）**：唯一索引确保表中的列具有唯一的值，不允许重复。每个唯一索引键都唯一标识一条数据行。如果尝试插入具有相同唯一索引键值的数据，将会触发唯一性约束错误。
- **联合索引（Composite Index）**：联合索引也被称为复合索引或多列索引，它是基于多个列的索引。联合索引可以包含两个或更多列，并按照指定的列顺序进行排序。联合索引可以提供更精确的查询筛选，加快多列条件下的查询速度。



例如，如果有一个表包含姓名和年龄两列，可以创建一个联合索引，首先按照姓名进行排序，然后按照年龄进行排序。这样就可以在查询中同时使用姓名和年龄条件进行筛选。

需要注意的是，索引的选择应基于实际需求和查询模式。过多或过少的索引都可能对数据库性能产生负面影响。因此，在设计索引时需要综合考虑查询频率、数据更新频率以及存储空间等因素。

### 顺序

- 根据中数据的物理顺序与键值的逻辑（索引）顺序关系：
    - 聚集索引（Clustered Index）。在聚集索引中，索引的顺序就是数据行的物理存储顺序，这意味着表中的数据行按照聚集索引的顺序存储在磁盘上。
    - 非聚集索引（Non-Clustered Index）。它与数据行的物理存储位置分开，而不像聚集索引那样直接决定了数据行的物理排序。非聚集索引通过索引键值来快速定位到对应的数据行。

BTree索引，在 InnoDB 中属于“聚集索引”，在 MyISAM 中属于“非聚集索引”。

## MySQL常用的索引

- B+Tree索引 - 适用于范围查找，例如，查找 id 从 2 到 10 之间的数据
- Hash索引 - 适用于精确匹配，例如，查找名字为“张三”的人

## 索引的优点

- 索引大幅提升了数据的检索效率
- 索引把随机IO，变成了顺序IO

## 索引是不是越多越好

- 读写：
    - 写：降低了写入数据的效率
    - 读：太多的索引增加了查询优化器的选择时间
- 存储：不合理的使用索引，会大幅占用磁盘空间


