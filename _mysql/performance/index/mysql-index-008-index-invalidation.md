---
title: "索引失效"
sequence: "108"
---

选择性太差

在 MySQL 中，以下情况可能会导致索引失效：

1. 使用了函数或表达式：当查询条件中对字段应用了函数或表达式时，索引可能会失效。例如，`WHERE YEAR(timestamp_column) = 2022`。

2. 对索引列进行了类型转换：如果查询条件中对索引列进行了类型转换，比如将整型字段转换为字符型进行比较，可能导致索引失效。

3. 使用了不匹配的前缀：如果在创建索引时使用了列的前缀，但在查询时没有使用相同的前缀，索引可能会失效。

4. 在联合索引中没有按照顺序使用索引列：如果查询条件中未按照联合索引列的顺序使用索引列，可能会导致索引失效。

5. 对索引列进行了 NULL 值判断：当查询条件中对索引列进行了 NULL 值判断时，索引可能会失效。

6. 数据量过小：如果表中的数据量很小，MySQL 可能会选择全表扫描而不使用索引。

7. 查询条件中使用了 OR：当查询条件中使用了 OR 连接多个条件时，如果其中有些条件无法利用索引，整个查询可能会导致索引失效。

在实际开发中，应该尽量避免以上情况，以确保索引的有效使用，提高查询性能。

## where

### 单列索引

- 精确查找
    - 对索引列进行计算
- 范围查找
    - =: `a > 1`, `<>`
    - null: is not null
    - in: not in
- 模糊查找 like
    - LIKE 以 % 开头索引会失效

### 多列索引

- 多列索引
    - 顺序

## order by




